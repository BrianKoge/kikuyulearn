<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Test - Kikuyulearn</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .audio-test-container {
            padding-top: 100px;
            min-height: 100vh;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        
        .audio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 2rem;
        }
        
        .audio-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .audio-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .audio-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1a1a1a;
            margin-bottom: 0.5rem;
        }
        
        .audio-filename {
            font-size: 0.9rem;
            color: #6c757d;
            margin-bottom: 1rem;
            font-family: monospace;
        }
        
        .audio-controls {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-header h1 {
            color: #1a1a1a;
            margin-bottom: 1rem;
        }
        
        .test-header p {
            color: #6c757d;
            max-width: 600px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="audio-test-container">
        <div class="container">
            <div class="test-header">
                <h1> Kikuyu Audio Test</h1>
                <p>Test all the audio files to ensure they're working correctly. Click the buttons to play, slow down, or repeat the audio.</p>
            </div>
            
            <div class="audio-grid" id="audioGrid">
                <!-- Audio cards will be generated here -->
            </div>
        </div>
    </div>

    <script>
        // Audio file mapping (same as in lesson.js)
        const audioFiles = {
            // Basic greetings and common phrases
            'w末-mwega': 'assets/wi_mwega.mp3',
            '农r末-mwega': 'assets/uri_mwega.mp3',
            'n末-mwega': 'assets/ni_mwega.mp3',
            '农k末末': 'assets/ukii.mp3',
            
            // Family members
            'm农tumia': 'assets/mutumia.mp3',
            'm农thuuri': 'assets/muthuuri.mp3',
            'mwana': 'assets/mwana.mp3',
            'm农tumia-wa-ny农mba': 'assets/mutumia_wa_nyumba.mp3',
            'm农thuuri-wa-ny农mba': 'assets/muthuuri_wa_nyumba.mp3',
            
            // Numbers and counting
            '末mwe-ig末r末-末that农-inya-末thano': 'assets/imwe__igiri__ithatu__inya_ithano.mp3',
            '末thathat农': 'assets/ithathatu.mp3',
            'm农gwanja': 'assets/mugwanja.mp3',
            'inyanya': 'assets/inyanya.mp3',
            
            // Colors
            'njer农-njiru-njeg农': 'assets/njeru,_njiru,_njegu.mp3',
            'nj农g农na': 'assets/njuguna.mp3',
            'nj农g农': 'assets/njugu.mp3',
            'nj农g农ny农': 'assets/njugunyu.mp3',
            
            // Grammar and sentence structure
            'n末-m农nd农-m农农ru': 'assets/ni_mundu_muuru.mp3',
            'n末-m农tumia': 'assets/ni_mutumia.mp3',
            'n末-m农thuuri': 'assets/ni_muthuuri.mp3',
            'n末-mwana': 'assets/ni_mwana.mp3',
            
            // Verbs and actions
            'n末k农r末a': 'assets/arikuria.mp3',
            '农r末k农r末a': 'assets/urikuria.mp3',
            'ar末k农r末a': 'assets/arikuria.mp3',
            't农r末k农r末a': 'assets/turikuria.mp3',
            
            // Culture and traditions
            'irua': 'assets/irua.mp3',
            'k末ama': 'assets/kiama.mp3',
            'm农gumo': 'assets/mugumo.mp3',
            'g末k农y农': 'assets/gikuyu.mp3',
            
            // Respect and elders
            'm农k农r农': 'assets/mukuru.mp3',
            'm农k农r农-wa-ny农mba': 'assets/mukuru_wa_nyumba.mp3',
            'm农k农r农-wa-k末ama': 'assets/mukuru_wa_kiama.mp3',
            '农t农农ro': 'assets/utuuro.mp3',
            
            // Daily conversations
            '农kaa': 'assets/ukaa.mp3',
            'n末kaa-k农r末a': 'assets/nikaa_kuria.mp3',
            '农农ka-r末ng末': 'assets/uuka_ringi.mp3',
            
            // Market and commerce
            'n末-k末末-g末u': 'assets/ni_kii_giu.mp3',
            'n末-g末a-k农农': 'assets/ni_gia_kuu.mp3',
            '农ng末heria': 'assets/ungiheria.mp3'
        };

        let currentAudio = null;

        // Generate audio test cards
        function generateAudioCards() {
            const audioGrid = document.getElementById('audioGrid');
            
            Object.entries(audioFiles).forEach(([key, path]) => {
                const card = document.createElement('div');
                card.className = 'audio-card';
                
                // Create a friendly title from the key
                const title = key.replace(/-/g, ' ').replace(/\b\w/g, l => l.toUpperCase());
                
                card.innerHTML = `
                    <div class="audio-title">${title}</div>
                    <div class="audio-filename">${path}</div>
                    <div class="audio-controls">
                        <button class="btn btn-primary" onclick="playAudio('${key}')">
                            <i class="fas fa-play"></i> Play
                        </button>
                        <button class="btn btn-outline" onclick="playAudioSlow('${key}')">
                            <i class="fas fa-slow-motion"></i> Slow
                        </button>
                        <button class="btn btn-outline" onclick="repeatAudio('${key}')">
                            <i class="fas fa-redo"></i> Repeat
                        </button>
                        <button class="btn btn-outline" onclick="stopAudio()">
                            <i class="fas fa-stop"></i> Stop
                        </button>
                    </div>
                `;
                
                audioGrid.appendChild(card);
            });
        }

        // Audio playback functions
        function playAudio(audioKey) {
            if (!audioKey || !audioFiles[audioKey]) {
                alert('Audio not found for key: ' + audioKey);
                return;
            }
            
            const audioPath = audioFiles[audioKey];
            console.log('Playing audio:', audioPath);
            
            // Stop any currently playing audio
            stopAudio();
            
            try {
                currentAudio = new Audio(audioPath);
                
                currentAudio.addEventListener('loadeddata', () => {
                    console.log('Audio loaded successfully');
                });
                
                currentAudio.addEventListener('error', (e) => {
                    console.error('Audio error:', e);
                    alert('Failed to load audio file');
                });
                
                currentAudio.addEventListener('ended', () => {
                    console.log('Audio finished playing');
                    currentAudio = null;
                });
                
                currentAudio.play().catch(error => {
                    console.error('Error playing audio:', error);
                    alert('Failed to play audio');
                });
                
            } catch (error) {
                console.error('Error creating audio element:', error);
                alert('Failed to create audio element');
            }
        }

        function playAudioSlow(audioKey) {
            if (!audioKey || !audioFiles[audioKey]) {
                alert('Audio file not found');
                return;
            }
            
            const audioPath = audioFiles[audioKey];
            console.log('Playing audio slowly:', audioPath);
            
            stopAudio();
            
            try {
                currentAudio = new Audio(audioPath);
                currentAudio.playbackRate = 0.7;
                
                currentAudio.addEventListener('loadeddata', () => {
                    console.log('Audio loaded successfully');
                });
                
                currentAudio.addEventListener('error', (e) => {
                    console.error('Audio error:', e);
                    alert('Failed to load audio file');
                });
                
                currentAudio.addEventListener('ended', () => {
                    currentAudio = null;
                });
                
                currentAudio.play().catch(error => {
                    console.error('Error playing audio:', error);
                    alert('Failed to play audio');
                });
                
            } catch (error) {
                console.error('Error creating audio element:', error);
                alert('Failed to create audio element');
            }
        }

        function repeatAudio(audioKey) {
            if (!audioKey || !audioFiles[audioKey]) {
                alert('Audio file not found');
                return;
            }
            
            const audioPath = audioFiles[audioKey];
            console.log('Repeating audio:', audioPath);
            
            stopAudio();
            
            try {
                currentAudio = new Audio(audioPath);
                currentAudio.loop = true;
                
                currentAudio.addEventListener('loadeddata', () => {
                    console.log('Audio loaded successfully');
                });
                
                currentAudio.addEventListener('error', (e) => {
                    console.error('Audio error:', e);
                    alert('Failed to load audio file');
                });
                
                currentAudio.play().catch(error => {
                    console.error('Error playing audio:', error);
                    alert('Failed to play audio');
                });
                
            } catch (error) {
                console.error('Error creating audio element:', error);
                alert('Failed to create audio element');
            }
        }

        function stopAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
                console.log('Audio stopped');
            }
        }

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            generateAudioCards();
        });
    </script>
</body>
</html>
